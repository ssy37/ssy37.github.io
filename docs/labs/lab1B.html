<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Lab 1B</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="../assets/img/favicon.png" rel="icon">
  <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: MyPortfolio
  * Template URL: https://bootstrapmade.com/myportfolio-bootstrap-portfolio-website-template/
  * Updated: Aug 08 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="portfolio-details-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid  position-relative d-flex align-items-center justify-content-between">

      <a href="../index.html" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="../assets/img/logo.png" alt=""> -->
        <h1 class="sitename">ssy37 Fast Robots</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="../about.html">About</a></li>
          <li class="dropdown"><a href="#"><span>Labs</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="labs/lab1A.html">Lab 1A</a></li>
              <li><a href="labs/lab1B.html">Lab 1B</a></li>
              <li><a href="#">Lab 2</a></li>
              <li><a href="#">Lab 3</a></li>
              <li><a href="#">Lab 4</a></li>
              <li><a href="#">Lab 5</a></li>
              <li><a href="#">Lab 6</a></li>
              <li><a href="#">Lab 7</a></li>
              <li><a href="#">Lab 8</a></li>
              <li><a href="#">Lab 9</a></li>
              <li><a href="#">Lab 10</a></li>
              <li><a href="#">Lab 11</a></li>
              <li><a href="#">Lab 12</a></li>
            </ul>
          </li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title light-background">
      <div class="container">
        <h1>Lab 1B</h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="../index.html">Home</a></li>
            <li class="current">Lab 1</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <div class="container">
      <h2>Objective</h2>
      <p>Lab 1B sets up Bluetooth communication between the computer and Artemis board, 
        enabling Python commands from the Jupyter server to control the board. 
        It also establishes a data transmission framework for future labs.</p>
    </div>

    <!-- prelab -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/connected_arduino.jpg" alt="">
                    <figcaption>MAC address and UUID printed in Arduino 
                      serial monitor after connecting</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/connected_jupyter.jpg" alt="">
                    <figcaption>MAC address and UUID printed in Jupyter interface</figcaption>
                  </figure>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>Prelab</h3>
                <h2>Setup</h2>
                <p>
                  To set up my computer for Lab 1, I installed Python, created a 
                  virtual environment, and connected to the Jupyter server. To set 
                  up the Artemis Board, I first downloaded the provided codebase. 
                  I then updated the Artemis MAC Address and changed the BLEService 
                  UUID to ensure exclusive connection to my own board.
                </p>
                <h2>Codebase</h2>
                <p>The provided codebase sets up a Bluetooth Low Energy (BLE) communication 
                  channel between the computer and the Artemis board using the ArduinoBLE 
                  library on the Artemis and a Python interface on the computer via Jupyter Labs. 
                  In BLE communication, UUIDs differentiate data types, while BLE characteristics 
                  handle data transmission. Commands sent from the computer are processed by the 
                  RobotCommand class in ble_arduino.ino. The handle_command() function interprets 
                  these commands using a switch statement to execute corresponding actions. The 
                  EString class is used for handling character arrays, and BLECStringCharacteristic 
                  is used to send and receive string-based commands. When transmitting data, it is 
                  important to keep in mind that the maximum message size that can be sent via BLE
                   is 150 bytes.</p>
              </div>
          </div>
        </div>
      </div>
  </section>

    <!-- Echo -->
    <section id="portfolio-details" class="portfolio-details section">

        <div class="container" data-aos="fade-up" data-aos-delay="100">
  
          <div class="row gy-4">
  
            <div class="col-lg-8">
              <div class="portfolio-details-slider swiper init-swiper">
  
                <script type="application/json" class="swiper-config">
                  {
                    "loop": true,
                    "speed": 600,
                    "autoplay": false,
                    "slidesPerView": "auto",
                    "pagination": {
                      "el": ".swiper-pagination",
                      "type": "bullets",
                      "clickable": true
                    }
                  }
                </script>
  
                <div class="swiper-wrapper align-items-center">
  
                  <div class="swiper-slide">
                    <img src="../assets/img/lab1_img/echo_code.jpg" alt="">
                  </div>
  
                  <div class="swiper-slide">
                    <img src="../assets/img/lab1_img/echo_jupyter.jpg" alt="">
                  </div>
  
                  <div class="swiper-slide">
                    <img src="../assets/img/lab1_img/echo_result.jpg" alt="">
                  </div>
  
                </div>
                <div class="swiper-pagination"></div>
              </div>
            </div>

            <div class="col-lg-5">
                <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                  <h3>ECHO</h3>
                  <p>
                    I implemented the ECHO command, which is used to send a string 
                    from the computer to the Artemis board. The Artemis board then sends an 
                    augmented string back to the computer. For instance, if “yoooo” is sent, 
                    the message received will be “Robot says -> yoooo”.
                  </p>
                </div>
            </div>
          </div>
        </div>
    </section>

    <!-- send-3-floats -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <img src="../assets/img/lab1_img/send_3_floats_arduino.jpg" alt="">
                </div>

                <div class="swiper-slide">
                  <img src="../assets/img/lab1_img/send_three_floats_python.jpg" alt="">
                </div>

                <div class="swiper-slide">
                  <img src="../assets/img/lab1_img/send_three_floats_serial.jpg" alt="">
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>SEND_THREE_FLOATS</h3>
                <p>
                  I implemented the SEND_THREE_FLOATS command. It is used to send three 
                  floats to the Artemis board, which then extracts the three values.
                </p>
              </div>
          </div>
        </div>
      </div>
    </section>

    <!-- get_time_millis -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/get_time_millis_code.jpg" alt="">
                    <figcaption>Arduino code</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/get_time_millis_python.jpg" alt="">
                    <figcaption>Python interface</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/get_time_millis_cmdtypes.jpg" alt="">
                    <figcaption>I had to update cmd_types.py in the codebase
                      to include the new command.
                    </figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/get_time_millis_enumtypes.jpg" alt="">
                    <figcaption>I also had to add the new command to the enum 
                      types in the Arduino sketch.</figcaption>
                  </figure>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>GET_TIME_MILLIS</h3>
                <p>
                  I implemented the GET_TIME_MILLIS command, to which the Artemis must reply by
                  writing the current time in milliseconds to the string characteristic.
                </p>
              </div>
          </div>
        </div>
      </div>
    </section>

    <!-- notifcation handler -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/notif_callback.jpg" alt="">
                    <figcaption>Notification callback function</figcaption>
                  </figure>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>Notification Handler</h3>
                <p>
                  I set up a notification handler in Python, which will allow the computer to
                   continuously collect data without needing to explicitly issue read commands.
                </p>
              </div>
          </div>
        </div>
      </div>
    </section>

    <!-- task 5 -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task5_arduino.jpg" alt="">
                    <figcaption>Arduino code</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task5_python.jpg" alt="">
                    <figcaption>Python interface. A total of 141 messages were received 
                      in 3s, indicating a data transfer rate of 47 messages/second.
                    </figcaption>
                  </figure>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>GET_TIME_MILLIS_3S</h3>
                <p>
                  I implemented the GET_TIME_MILLIS_3S command, which tells the Artemis to continuously
                   write the current time in milliseconds to the string characteristic for 3 seconds. 
                   The notification handler receives and processes these messages. With this method, I was able 
                   to track the data transfer rate.
                </p>
              </div>
          </div>
        </div>
      </div>
    </section>

    <!-- task 6 -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task6_arduino.jpg" alt="">
                    <figcaption>Arduino code</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task6_global_variables.jpg" alt="">
                    <figcaption>I made sure to initialize the array under global scope.</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task6_python_1.jpg" alt="">
                    <figcaption>Python code</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task6_post_processing.jpg" alt="">
                    <figcaption>I realized that I had many repeated timestamps in my data. 
                      I post-processed my received messages and obtained counts for each timestamp. I suspect 
                      this may be due to the fact that I am using a for-loop to add timestamps to a global array 
                      before attempting to send the data, and the for-loop executes many times per millisecond.
                    </figcaption>
                  </figure>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>SEND_TIME_DATA</h3>
                <p>
                  My implementation of the SEND_TIME_DATA command tells the Artemis to first 
                  store timestamps in a global array, then loop through the array to send each entry 
                  to the laptop as a string. In the Python interface, I stored all the received 
                  messages in a list to check if all the data was sent. Since I was only sending one entry 
                  at a time (each timestamp was 4 bytes in size, well under the 150-byte limit), I did not have 
                  to worry about limiting my array size so I set it to 300.
                  <br>
                  However, it is important to note that my implementation would have looked very different if 
                  I were required to send the entire array of messages at once. Since the BLE protocol used 
                  in this lab sets a 150-byte limit on data that can be sent, my array size would be capped at 150.
                </p>
              </div>
          </div>
        </div>
      </div>
    </section>

    <!-- task 7 -->
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row gy-4">

          <div class="col-lg-8">
            <div class="portfolio-details-slider swiper init-swiper">

              <script type="application/json" class="swiper-config">
                {
                  "loop": true,
                  "speed": 600,
                  "autoplay": false,
                  "slidesPerView": "auto",
                  "pagination": {
                    "el": ".swiper-pagination",
                    "type": "bullets",
                    "clickable": true
                  }
                }
              </script>

              <div class="swiper-wrapper align-items-center">

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task7_arduino_updated.jpg" alt="">
                    <figcaption>Arduino code</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task7_notif_callback.jpg" alt="">
                    <figcaption>Updated notification callback function 
                      to accomodate for two separate lists.
                    </figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task7_results_updated.jpg" alt="">
                    <figcaption>Received messages</figcaption>
                  </figure>
                </div>

                <div class="swiper-slide">
                  <figure>
                    <img src="../assets/img/lab1_img/task7_list_check.jpg" alt="">
                    <figcaption>
                      The length of each list is 250, which is expected.
                    </figcaption>
                  </figure>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>

          <div class="col-lg-5">
              <div class="portfolio-info" data-aos="fade-up" data-aos-delay="200">
                <h3>GET_TEMP_READINGS</h3>
                <p>
                  My implementation of the GET_TEMP_READINGS command tells the Artemis to first 
                  store timestamps and temperatures in seaparte global arrays, then loop through 
                  both arrays simultaneously to send each entry to the laptop as a string. In the 
                  Python interface, I split the message into its time and temperature components, 
                  and stored each in a separate list.
                </p>
              </div>
          </div>
        </div>
      </div>
    </section>

    <div class="container">
      <h2>Discussion</h2>
      <p>Lab 1B was very helpful for familiarizing myself with Bluetooth communication. 
        It was also a good way to visualize real-time data collection, and offered a glimpse into 
        the ideas of data transfer rate, which will be very important later on.
      </p>
    </div>

  </main>

  <footer id="footer" class="footer light-background">

    <div class="container">
      <div class="copyright text-center ">
        <p>© <span>Copyright</span> <strong class="px-1 sitename">ssy37 Fast Robots</strong> <span>All Rights Reserved</span></p>
      </div>
      <div class="social-links d-flex justify-content-center">
        <a href=""><i class="bi bi-linkedin"></i></a>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/php-email-form/validate.js"></script>
  <script src="../assets/vendor/aos/aos.js"></script>
  <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="../assets/js/main.js"></script>

</body>

</html>